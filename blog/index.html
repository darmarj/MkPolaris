
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="One branded static site from a set of Markdown files to host the documentation for Open Source or Commercial project">
      
      
        <meta name="author" content="Darmarj">
      
      
      
        <link rel="prev" href="../Linux/Gentoo/Bootloader/">
      
      
        <link rel="next" href="category/container/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>Blog - MkPolaris</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  <link rel="stylesheet" href="../assets/stylesheets/custom.00c04c01.min.css">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  For updates follow <strong>NEWS</strong> on
  <a href="https://github.com/darmarj">
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </span>
    <strong>Github</strong>
  </a>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MkPolaris" class="md-header__button md-logo" aria-label="MkPolaris" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MkPolaris
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/darmarj/MkPolaris" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    darmarj/MkPolaris
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../DevOps/Container/containerd/" class="md-tabs__link">
          
  
    
  
  Container

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../DevOps/Terraform/Kubernetes/" class="md-tabs__link">
          
  
    
  
  Terraform

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../DevOps/Ansible/architecture/" class="md-tabs__link">
          
  
    
  
  Ansible

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Linux/Network/NetCat/" class="md-tabs__link">
          
  
    
  
  GNU/Linux

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MkPolaris" class="md-nav__button md-logo" aria-label="MkPolaris" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    MkPolaris
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/darmarj/MkPolaris" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    darmarj/MkPolaris
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Container
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Container
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Container Runtime
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Container Runtime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Container/containerd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containerd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Docker/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Container/namespace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Namespace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Container/cgroups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cgroups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Container/nerdctl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nerdctl
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rancher
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Rancher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Rancher/K3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Kubernetes/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Terraform
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Terraform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Terraform/Kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Terraform/KVM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Terraform/Proxmox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxmox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Kubernetes/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ansible
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Ansible
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Ansible/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Ansible/ad-Hoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ad-Hoc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Ansible/playbooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Playbooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Ansible/beyond-the-basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beyond the basic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/Ansible/playbook-organization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Playbook Organization - Roles, Includes, and Imports
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GNU/Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            GNU/Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Network/NetCat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Distro
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Distro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gentoo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1">
            <span class="md-nav__icon md-icon"></span>
            Gentoo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1_1" id="__nav_5_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to install Gentoo with EFI boot loader and OpenRC sysControl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Media/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Choosing the media
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Prepare%20the%20disks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prepare the disks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Stage3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing stage3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Base%20system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing base system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring the kernel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring the system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/Gentoo/Bootloader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring the bootloader
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Container
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/gnu-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GNU Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/gnome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gnome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/groff--mom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Groff &amp; MOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/kvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/openwrt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenWRT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/proxmox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxmox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/rockylinux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RockyLinux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/sublime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sublime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/synology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/terraform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terraform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/tmux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tmux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/vagrant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vagrant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/ibus-rime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ibus-rime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/vaultwarden/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vaultWarden
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog<a class="headerlink" href="#blog" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-07-22 00:00:00">July 22, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/router/" class="md-meta__link">Router</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="openwrt-on-xiaomi-r3p"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/">Openwrt on XiaoMi R3P</a></h2>
<h3 id="ready-for-go"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#ready-for-go">Ready for go</a></h3>
<ul>
<li>Download Developer ROM from XiaoMi
    <a href="http://www1.miwifi.com/miwifi_download.html">ROM</a></li>
<li>Make sure to bundle router with XiaoMi App, then download SSH firmware, file the password
    <a href="https://d.miwifi.com/rom/ssh">Firmware</a></li>
<li>Download <a href="https://firmware-selector.immortalwrt.org">Openwrt</a></li>
<li>One USB with FAT32</li>
<li>One toothpick</li>
</ul>
<h3 id="xiaomi-dev-firmware"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#xiaomi-dev-firmware">XiaoMi Dev Firmware</a></h3>
<h4 id="option-1"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#option-1">Option 1:</a></h4>
<p>Login to XiaoMi router and flush dev firmware</p>
<h4 id="option-2"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#option-2">Option 2:</a></h4>
<ol>
<li>Copy XiaoMi firmware(dev) into USB.</li>
<li>Poweroff XiaoMi router, plug in USB and press&amp;hold "reset" button, then power router on.</li>
<li>Waiting for light flashing to <span class="amber"><strong>yellow</strong></span>, then release "reset" button.</li>
<li>Succeed when light flashing to <span class="skype"><strong>blue</strong></span>.</li>
</ol>
<h3 id="xiaomi-ssh"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#xiaomi-ssh">XiaoMi SSH</a></h3>
<h4 id="refer-as-firmware-option-2"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#refer-as-firmware-option-2">Refer as firmware option 2</a></h4>
<h3 id="login-router-through-ssh"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#login-router-through-ssh">Login router through ssh</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ssh<span class="w"> </span>root@192.168.31.1
</span></code></pre></div>
<h3 id="flush-openwrt"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#flush-openwrt">Flush Openwrt</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>scp<span class="w"> </span><span class="nv">$PATH</span>/Openwrt.bin<span class="w"> </span>root@192.168.31.1:/tmp
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">cd</span><span class="w"> </span>/tmp
</span></code></pre></div>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># 设置环境变量</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>nvram<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">flag_try_sys1_failed</span><span class="o">=</span><span class="m">1</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>nvram<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">flag_try_sys2_failed</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>nvram<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">flag_boot_success</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>nvram<span class="w"> </span>commit<span class="w"> </span><span class="c1"># save ENV into RAM</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>factory.bin<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mtd<span class="w"> </span>write<span class="w"> </span>-<span class="w"> </span>kernel1<span class="w"> </span><span class="c1"># invoke openwrt.bin and write into disk partition</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>mtd<span class="w"> </span>erase<span class="w"> </span>rootfs0<span class="w"> </span><span class="c1"># Erase all data on rootfs0 partition</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>mtd<span class="w"> </span>erase<span class="w"> </span>rootfs1<span class="w"> </span><span class="c1"># Erase all data on rootfs1 partition</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>mtd<span class="w"> </span>erase<span class="w"> </span>overlay<span class="w"> </span><span class="c1"># Erase all data on overlay partition</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>factory.bin<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">skip</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mtd<span class="w"> </span>write<span class="w"> </span>-<span class="w"> </span>rootfs0<span class="w"> </span><span class="c1"># invoke openwrt.bin and write into rootfs0 partition</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>reboot
</span></code></pre></div>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://www.geeksforgeeks.org/dd-command-linux">dd</a>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://openwrt.org/docs/techref/mtd">mtd</a></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># review system partition</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>cat<span class="w"> </span>/proc/mtd
</span></code></pre></div>
<h3 id="revert-to-xiaomi-official-firmware"><a class="toclink" href="2024/07/22/openwrt-on-xiaomi-r3p/#revert-to-xiaomi-official-firmware">Revert to XiaoMi Official Firmware</a></h3>
<p>Step 1</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># ENV</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>fw_setenv<span class="w"> </span>flag_try_sys1_failed<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>fw_setenv<span class="w"> </span>flag_try_sys2_failed<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>fw_setenv<span class="w"> </span>flag_boot_success<span class="w"> </span><span class="m">0</span>
</span></code></pre></div>
<div class="admonition failure">
<p class="admonition-title">Failure</p>
<p>Install <a href="https://openwrt.org/toh/hwdata/xiaomi/xiaomi_mi_router_3_pro">Openwrt Official R3P</a> upgrade firmware if fails do upon command for ENV. Do it again after then.</p>
</div>
<p>Step 2</p>
<p>Poweroff router, refer as <a href="2024/07/22/openwrt-on-xiaomi-r3p/#xiaomi-dev-firmware">XiaoMi Dev Firmware</a></p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://mucen.cn/docs/openwrt/install/xiaomi-router-install-OpenWrt/#%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%89%88%E5%9B%BA%E4%BB%B6%E5%B9%B6%E5%BC%80%E5%90%AF-ssh-%E5%8A%9F%E8%83%BD">mucen</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-07-10 00:00:00">July 10, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/synology/" class="md-meta__link">Synology</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/">Secure Synology NAS with a custom domain, dynamic DNS and a free SSL certification</a></h2>
<h3 id="acme"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#acme"><a href="https://github.com/acmesh-official/acme.sh">ACME</a></a></h3>
<table>
<thead>
<tr>
<th>CA</th>
<th>valid days</th>
<th>ECC algorithm</th>
<th>max domains</th>
<th>wildcard</th>
<th>IPv4</th>
<th>IPv6</th>
<th>NotAfter</th>
<th>IDN</th>
</tr>
</thead>
<tbody>
<tr>
<td>Let's Encrypt</td>
<td>90</td>
<td>Yes</td>
<td>100</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>ZeroSSL</td>
<td>90</td>
<td>Yes</td>
<td>100</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Google</td>
<td>90</td>
<td>Yes</td>
<td>100</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Buypass</td>
<td>180</td>
<td>Yes</td>
<td>5</td>
<td>Paid</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>SSL.com</td>
<td>90</td>
<td>Yes</td>
<td>2</td>
<td>Paid</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>HiCA</td>
<td>180</td>
<td>Paid</td>
<td>10 (1 if wildcard)</td>
<td>Yes</td>
<td>Paid</td>
<td>Paid</td>
<td>No</td>
<td>Paid</td>
</tr>
</tbody>
</table>
<h3 id="pre-requisites"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#pre-requisites">Pre-requisites</a></h3>
<p>This is what you will need:</p>
<ul>
<li>A <a href="https://freedns.afraid.org/">FreeDNS</a> account to have dynamic DNS. Create an account if you don't have it.</li>
<li>A domain of your own with full control over it. If you don't have one, you can also do register.</li>
<li>acme.sh - A pure Unix shell script implementing script</li>
</ul>
<h3 id="dynamic-dns-with-freedns"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#dynamic-dns-with-freedns">Dynamic DNS with FreeDNS</a></h3>
<p>Your ISP can change your public IP without warning, and usually does it each time your router is rebooted, so you need a way to update the DNS name servers whenever that happens. <strong>FreeDNS</strong> is a service that allow you to freely update DNS records so that your domain name points to your public IP all the time</p>
<h4 id="forward-your-custom-domain-to-freedns-servers"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#forward-your-custom-domain-to-freedns-servers">Forward your custom domain to FreeDNS servers</a></h4>
<p>Change NS records on registrar(eg. GoDaddy,Namecheap,etc)
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>NS1.AFRAID.ORG
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>NS2.AFRAID.ORG
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>NS3.AFRAID.ORG
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>NS4.AFRAID.ORG
</span></code></pre></div></p>
<h4 id="add-subdomain-of-type-a"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#add-subdomain-of-type-a">Add subdomain of type A</a></h4>
<p>The most important ones right now are your generic domain (eg, <code>whatever.com</code>) and the www host ( <code>www.whatever.com</code>). The IP is not that important at this point, since we will be updating it dynamically.</p>
<h4 id="edit-ddns-on-synology"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#edit-ddns-on-synology">Edit DDNS on Synology</a></h4>
<ul>
<li>Open Control Panel</li>
<li>Browse to <code>Connectivity</code> -&gt; <code>External Access</code></li>
<li>Click the DDNS tab and then click the <code>Add</code> button</li>
<li>In <strong><em><code>Service Provider</code></em></strong>, choose <strong>Freedns.org</strong></li>
<li>In Hostname, type the domain name, eg <code>whatever.com</code></li>
<li>Fill in Username and Password with Free credentials</li>
<li>Click the Test Connection button</li>
</ul>
<p>Waiting until the status going on <code>Normal</code> for configuration save.</p>
<h3 id="install-docker"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#install-docker">Install Docker</a></h3>
<h4 id="create-a-group-for-docker"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#create-a-group-for-docker">Create a group for Docker</a></h4>
<ul>
<li>Open Control Panel</li>
<li>Browse to User&amp;group</li>
<li>Click on Group and create a new group called <code>docker</code></li>
<li>Click on Members</li>
<li>Add user to the group</li>
</ul>
<h3 id="grant-docker-group-permission-to-run-docker"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#grant-docker-group-permission-to-run-docker">Grant docker group permission to run Docker</a></h3>
<p>Issue the command to be able to use docker without having to <code>sudo</code>everything:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>chown<span class="w"> </span>root:docker<span class="w"> </span>/var/run/docker.sock
</span></code></pre></div></p>
<h3 id="certificate-with-zerossl"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#certificate-with-zerossl">Certificate with ZeroSSL</a></h3>
<p>Browsers these days are more an more concerned about security, and while you can connect to your NAS ignoring the warnings, I prefer not having that feeling of something’s wrong by issuing my own certificate and publishing it in my Synology. <strong>ZeroSSL</strong> is a service that allows you to issue a certificate for your domain at no cost.</p>
<h4 id="to-come-to-the-git-service-which-not-install-on-synology"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#to-come-to-the-git-service-which-not-install-on-synology">To come to the git service which not install on Synology.</a></h4>
<div class="language-docker highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-ti<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>:/root<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/git<span class="w"> </span>alpine/git<span class="w"> </span>clone<span class="w"> </span>https://github.com/acmesh-official/acme.sh.git<span class="w"> </span>acmesh
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nb">cd</span><span class="w"> </span>acmesh
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>chmod<span class="w"> </span>+ux<span class="w"> </span>./acme.sh
</span></code></pre></div>
<h4 id="export-variable-for-freedns-script-for-work"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#export-variable-for-freedns-script-for-work">Export variable for FreeDNS script for work</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">FREEDNS_User</span><span class="o">=</span><span class="s2">&quot;&lt;FreeDNS username&gt;&quot;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">FREEDNS_Password</span><span class="o">=</span><span class="s2">&quot;&lt;FreeDNS password&quot;</span>
</span></code></pre></div>
<h4 id="test"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#test">Test</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>./acme.sh<span class="w"> </span>--issue<span class="w"> </span>--dns<span class="w"> </span>dns_freedns<span class="w"> </span>-d<span class="w"> </span>whatever.com<span class="w"> </span>-d<span class="w"> </span>www.whatever.com<span class="w"> </span>--test
</span></code></pre></div>
<h4 id="register-in-zerossl"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#register-in-zerossl">Register in ZeroSSL</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Replace the email address with -m option</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>./acme.sh<span class="w"> </span>--register-account<span class="w"> </span>-m<span class="w"> </span>me@whatever.com<span class="w"> </span>--server<span class="w"> </span>zerossl
</span></code></pre></div>
<h4 id="issue-the-certificate"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#issue-the-certificate">Issue the certificate</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># The --force flag is required only if you did the --test before.</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>/acme.sh<span class="w"> </span>--issue<span class="w"> </span>--dns<span class="w"> </span>dns_freedns<span class="w"> </span>-d<span class="w"> </span>whatever.com<span class="w"> </span>-d<span class="w"> </span>www.whatever.com<span class="w"> </span>--force
</span></code></pre></div>
<p>After a while, the feedback will be showed up
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Your<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span><span class="k">in</span>:<span class="w"> </span>/acme.sh/whatever.com/whatever.com.cer
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Your<span class="w"> </span>cert<span class="w"> </span>key<span class="w"> </span>is<span class="w"> </span><span class="k">in</span>:<span class="w"> </span>/acme.sh/whatever.com/whatever.com.key
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>The<span class="w"> </span>intermediate<span class="w"> </span>CA<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span><span class="k">in</span>:<span class="w"> </span>/acme.sh/whatever.com/ca.cer
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>And<span class="w"> </span>the<span class="w"> </span>full<span class="w"> </span>chain<span class="w"> </span>certs<span class="w"> </span>is<span class="w"> </span>there:<span class="w"> </span>/acme.sh/whatever.com/fullchain.cer
</span></code></pre></div></p>
<h3 id="publish-the-certification-to-synology"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#publish-the-certification-to-synology">Publish the certification to Synology</a></h3>
<p>To deploy the certificate in NAS. ACME has to do something called <strong><em>deploy hooks</em></strong>, that take care of the required steps to publish certificate in different environments. The <a href="https://github.com/acmesh-official/acme.sh/wiki/deployhooks#20-deploy-the-cert-into-synology-dsm">Synology_dsm_hook</a> will be used.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SYNO_Username</span><span class="o">=</span><span class="s2">&quot;&lt;DSM Admin Username&gt;&quot;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SYNO_Password</span><span class="o">=</span><span class="s2">&quot;&lt;DSM Admin Password&gt;&quot;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SYNO_Certificate</span><span class="o">=</span><span class="s2">&quot;acme.sh whatever.com ZS certificate&quot;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SYNO_Create</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="c1"># default is off, means setting is not saved.  By setting to 1 we create the certificate if it&#39;s not in DSM</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>acme.sh<span class="w"> </span>--deploy<span class="w"> </span>-d<span class="w"> </span>whatever.com<span class="w"> </span>--deploy-hook<span class="w"> </span>synology_dsm
</span></code></pre></div>
<h3 id="program-the-renewal-of-the-cert"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#program-the-renewal-of-the-cert">Program the renewal of the cert</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>./acme.sh<span class="w"> </span>--cron
</span></code></pre></div>
<h4 id="schedule-a-task-for-cron-job-on-synology"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#schedule-a-task-for-cron-job-on-synology">Schedule a task for cron job on Synology</a></h4>
<ul>
<li>Control Panel -&gt; Task Scheduler</li>
<li>Create -&gt; Scheduled Task -&gt; User-defined script</li>
<li>Give a task name eg "Renew cert" and choose the use under <strong>docker</strong> group</li>
<li>Set a repeat time for job loop</li>
<li>Add following script into User-defined tab:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>/var/services/homes/fernando/acmesh/acme.sh<span class="w"> </span>--cron
</span></code></pre></div></li>
</ul>
<h3 id="change-the-cert-in-dsm-as-the-default"><a class="toclink" href="2024/07/10/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-ssl-certification/#change-the-cert-in-dsm-as-the-default">Change the cert in DSM as the default</a></h3>
<ul>
<li>Control Panel -&gt; Connectivity -&gt; Security</li>
<li>Click Certificate tab</li>
<li>The new cert should be showing up</li>
<li>Select the cert as the default for the services</li>
<li>Click OK for save.</li>
</ul>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://medium.com/@ferarias/secure-synology-nas-with-a-custom-domain-dynamic-dns-and-a-free-certificate-e61fd8e607a8">Medium</a>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://dr-b.io/post/Synology-DSM-7-with-Lets-Encrypt-and-DNS-Challenge">dr-b.io</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-29 00:00:00">June 29, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/gnu-project/" class="md-meta__link">GNU Project</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="intro"><a class="toclink" href="2024/06/29/intro/">Intro</a></h2>
<p>One painful part of keeping a dotfiles directory is managing symbolic links between your configuration files and the locations where they need to go in your home directory.</p>
<h2 id="whats-is-gnu-stow"><a class="toclink" href="2024/06/29/intro/#whats-is-gnu-stow">What's is GNU-Stow</a></h2>
<p><a href="https://www.gnu.org/software/stow/">GNU Stow</a> is a symlink farm manager which takes distinct packages of software and/or data located in separate directories on the filesystem, and makes them appear to be installed in the same place.</p>
<h2 id="how-to-install"><a class="toclink" href="2024/06/29/intro/#how-to-install">How to install</a></h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># For Arch</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>pacman<span class="w"> </span>-Sy<span class="w"> </span>stow
</span></code></pre></div>
<h2 id="basic-usage"><a class="toclink" href="2024/06/29/intro/#basic-usage">Basic Usage</a></h2>
<p>Let’s say we’ve got our configuration files stored in a directory under the home directory called .dotfiles. We can easily create symbolic links to the files in this directory to the equivalent locations in the home directory using the following command:</p>
<div class="language-bash highlight"><span class="filename">💁‍♀️ Basic Ref</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Create the soft link in the parent folder</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>stow<span class="w"> </span>.
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Example</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$HOME</span>/dotfiles/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$_</span><span class="w">   </span><span class="c1"># Create the dot file</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>mkdir<span class="w"> </span>.config<span class="w">   </span><span class="c1"># Prepare for .config folder for stow</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>mv<span class="w"> </span><span class="nv">$HOME</span>/.config/nvim<span class="w"> </span><span class="nv">$HOME</span>/dotfiles/.config<span class="w">    </span><span class="c1"># Move the folder that need for stow</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>stow<span class="w"> </span>.<span class="w">  </span><span class="c1"># Stow trigger for syslink</span>
</span></code></pre></div>
<h2 id="how-it-works"><a class="toclink" href="2024/06/29/intro/#how-it-works">How it works</a></h2>
<p>GNU Stow walks the file and directory hierarchy of the directory passed as the first parameter to the stow command and creates symbolic links to those files in the equivalent locations in the target directory.</p>
<p>The important thing to be aware of here is that our dotfiles directory must have the same layout as where the files would be placed under the home directory. This means you will need to have the equivalent subdirectory structure in your dotfiles folder so that all symbolic links get created in the right place.</p>
<h2 id="ignoring-files-and-directories"><a class="toclink" href="2024/06/29/intro/#ignoring-files-and-directories">Ignoring files and directories</a></h2>
<p>By default, GNU Stow does a good job of <a href="https://www.gnu.org/software/stow/manual/stow.html#Types-And-Syntax-Of-Ignore-Lists">ignoring common files and directories</a> you might not want to be linked back to your home directory like README and LICENSE files, source control folders.</p>
<p>To skip files like this, we can create a file in our dotfiles folder called .stow-local-ignore. Each line of this file should be a string or regular expression representing any file or directory you don’t want to link to your home folder.</p>
<div class="language-bash highlight"><span class="filename">💁‍♂️    Ignore files and directories</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Example</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="se">\.</span>git
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>misc
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">#LICENSE</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>^/.*<span class="se">\.</span>org
</span></code></pre></div>
<h2 id="cleaning-up-symbolic-links"><a class="toclink" href="2024/06/29/intro/#cleaning-up-symbolic-links">Cleaning up symbolic links</a></h2>
<p>If for some reason you’d like to get rid of all the symbolic links that GNU Stow created in your home folder, you can do that with one extra parameter to the command we’ve been running so far:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>stow<span class="w"> </span>-D<span class="w"> </span>.<span class="w">   </span><span class="c1"># Under that folder which did run &quot;stow .&quot; command before.</span>
</span></code></pre></div>
<h2 id="check-out-the-gnu-stow-manual"><a class="toclink" href="2024/06/29/intro/#check-out-the-gnu-stow-manual">Check out the GNU Stow manual</a></h2>
<p>For more information about GNU Stow and details on other ways it can be used, check out the
<a href="https://www.gnu.org/software/stow/manual/">GNU-Stow Manual</a></p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://systemcrafters.net/managing-your-dotfiles/using-gnu-stow/">SYSTEM CRAFTERS</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-23 00:00:00">December 23, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/proxmox/" class="md-meta__link">Proxmox</a>, 
              <a href="category/container/" class="md-meta__link">Container</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="installing-docker"><a class="toclink" href="2023/12/23/installing-docker/">Installing Docker</a></h2>
<h3 id="install-docker-on-proxmox"><a class="toclink" href="2023/12/23/installing-docker/#install-docker-on-proxmox">Install Docker on Proxmox</a></h3>
<p>We’re installing Docker along with Docker Compose from the official Docker repository according to the <a href="https://docs.docker.com/engine/install/debian/">docs</a>:</p>
<p>Update:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>apt<span class="w"> </span>update
</span></code></pre></div></p>
<p>Install the required packages to access the Docker repository via HTTPS:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>apt<span class="w"> </span>install<span class="w"> </span>ca-certificates<span class="w"> </span>curl<span class="w"> </span>gnupg<span class="w"> </span>lsb-release
</span></code></pre></div></p>
<p>Add Docker’s GPG key:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/apt/keyrings
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/debian/gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/docker.gpg
</span></code></pre></div></p>
<p>Add Docker’s stable repository:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian </span><span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> stable&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/docker.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
</span></code></pre></div></p>
<p>Update and install Docker:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>apt<span class="w"> </span>update
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>apt<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io<span class="w"> </span>docker-compose-plugin
</span></code></pre></div></p>
<p>Verify that Docker is installed correctly by running an image that prints a message and exits:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>systemctl<span class="w"> </span>status<span class="w"> </span>docker
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>hello-world
</span></code></pre></div></p>
<h3 id="configuring-docker"><a class="toclink" href="2023/12/23/installing-docker/#configuring-docker">Configuring Docker</a></h3>
<h4 id="log-rotation"><a class="toclink" href="2023/12/23/installing-docker/#log-rotation"><span class="vividgreen">Log Rotation</span></a></h4>
<p>By default, log rotation is disabled (<a href="https://docs.docker.com/config/containers/logging/configure/">docs</a>). To enable log rotation, create a Docker config file /etc/docker/daemon.json with the following content:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">&quot;log-driver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;json-file&quot;</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">&quot;log-opts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nt">&quot;max-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10m&quot;</span><span class="p">,</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="nt">&quot;max-file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>Restart the Docker daemon (<code>service docker restart</code>). To verify, run <code>docker info</code>.</p>
<h4 id="docker-data-directory"><a class="toclink" href="2023/12/23/installing-docker/#docker-data-directory"><span class="vivigreen">Docker Data Directory</span></a></h4>
<p>On the Proxmox host, create Docker data directories:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>mkdir<span class="w"> </span>/rpool/data/docker
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>mkdir<span class="w"> </span>/rpool/encrypted/docker
</span></code></pre></div></p>
<h3 id="troubleshooting-docker"><a class="toclink" href="2023/12/23/installing-docker/#troubleshooting-docker">Troubleshooting Docker</a></h3>
<h4 id="inspecting-container-logs"><a class="toclink" href="2023/12/23/installing-docker/#inspecting-container-logs"><span class="vividgreen">Inspecting Container Logs</span></a></h4>
<p>Docker captures stdout and stderr output from within containers and writes it to log files. To inspect, use docker compose logs (docker logs works, too), e.g., like this:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>&lt;container&gt;<span class="w"> </span>--tail<span class="w"> </span><span class="m">30</span><span class="w"> </span>--timestamps
</span></code></pre></div>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://helgeklein.com/blog/installing-proxmox-as-docker-host-on-intel-nuc-home-server/">Helge Klein --- Docker Host on Proxmox</a></p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://blog.gurucomputing.com.au/homelabbing-with-proxmox/installing-a-docker-environment/">Gurucomputing --- Installing a Docker environment</a></p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span><a href="https://pve.proxmox.com/wiki/Unprivileged_LXC_containers">Unprivileged LXC containers</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-22 00:00:00">December 22, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/vaultwarden/" class="md-meta__link">vaultWarden</a>, 
              <a href="category/proxy/" class="md-meta__link">Proxy</a>, 
              <a href="category/proxmox/" class="md-meta__link">Proxmox</a></li>
        
        
          
          <li class="md-meta__item">
            
              6 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="autommatic-https-certifications-for-services-on-internal-home-network"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/">Autommatic HTTPS Certifications for Services on Internal Home Network</a></h2>
<p>For internal home network <strong>without opening a port on your firewall</strong>, this article explains how to setup automatic HPPTS certifications via Let's Encrypt for services.</p>
<h3 id="requirements"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#requirements">Requirements</a></h3>
<p>Today, encryption of data in transit via HTTPS is considered mandatory and is often easy to implement via the excellent free service Let’s Encrypt. However, it typically requires that the service in question be reachable from the internet for domain verification purposes. Exposing internal services to the internet is often not desirable, however, as this makes the services attackable. Therefore looking for a way to obtain Let’s Encrypt certificates without creating a security risk by opening firewall ports. In a nutshell:</p>
<ul>
<li>Internal services on a home network are to be made accessible via HTTPS without certificate warnings.</li>
<li>No access to internal services from the internet.<ul>
<li>No open ports. No open ports.</li>
<li>No cloud-based tunneling service</li>
</ul>
</li>
</ul>
<h3 id="dns-challenge-caddy-to-the-rescue"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#dns-challenge-caddy-to-the-rescue">DNS Challenge + Caddy to the Rescue</a></h3>
<p>Luckily, there is an alternative to the <a href="https://letsencrypt.org/docs/challenge-types/">Let’s Encrypt HTTP challenge: DNS</a>. There’s also an excellent free reverse proxy that happily handles everything related to HTTPS, including the Let’s Encrypt DNS challenge: <a href="2022/12/13/simple-caddy-what-is-caddy/">Caddy</a>. This is how the setup works:</p>
<ul>
<li>Use a subdomain of a public DNS domain for the hostnames of our services.<ul>
<li>For security reasons, the subdomain should be used exclusively for the purposes described in this article, not for email (see below).</li>
</ul>
</li>
<li>HTTPS certificates are handled by a Caddy instance that acts as a reverse proxy.</li>
<li>Caddy is configured to auto-manage Let’s Encrypt certificates via the DNS challenge, which uses TXT records for verification.</li>
</ul>
<details class="pied-piper">
<summary>Let’s Encrypt DNS Challenge Explained</summary>
<p>Here’s what happens when a certificate is requested via the Let’s Encrypt DNS challenge:
-   The Let’s Encrypt client creates a special _acme-challenge DNS TXT record.
-   Let’s Encrypt queries DNS for that record. If the record’s data is in order, Let’s Encrypt issues the certificate.
-   The Let’s Encrypt client deletes the _acme-challenge DNS TXT record as it’s not needed any more.</p>
</details>
<details class="pied-piper">
<summary>Let’s Encrypt DNS Challenge &amp; DNS Zone Security</summary>
<ul>
<li>API write access to the DNS record _acme-challenge is required for automatic renewal.</li>
<li><strong>Problem</strong>: most DNS providers don’t have granular access control. API tokens are often valid for the entire zone or even account (Cloudflare). This would allow modification of existing MX records (redirecting your email).</li>
<li><a href="https://github.com/acmesh-official/acme.sh/wiki/DNS-alias-mode">DNS alias mode</a> could be a solution (but isn’t).<ul>
<li>In DNS alias mode, we’d set up a second DNS zone used exclusively for ACME (Let’s Encrypt) validation. API access is only required for this validation domain.</li>
<li>We’d set up a CNAME record to point from the main domain to the validation domain.</li>
<li>Unfortunately, this doesn’t work with Caddy’s Cloudflare DNS module.</li>
</ul>
</li>
<li>Instead, we use a <strong>DNS domain exclusively</strong> for the purposes described in this article (i.e., ACME challenges and, optionally, name resolution).</li>
</ul>
</details>
<h3 id="preparation"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#preparation">Preparation</a></h3>
<p><span class="vividgreen">Cloudflare API Token</span></p>
<p>A free Cloudflare account to manage the DNS domain for the hostnames of the services. Alternatively, you can use any DNS provider that’s supported by Caddy (search the list of <a href="https://caddyserver.com/docs/modules/">modules</a> for <span class="carrot">dns.providers</span>).</p>
<p>In Cloudflare account, create an API token with the following properties for own Domain:</p>
<ul>
<li>Required permissions:<ul>
<li>Zone - Zone -read</li>
<li>Zone - DNS - edit</li>
</ul>
</li>
<li>Scope: Include Specific zone<ul>
<li>The own public domain is required for the zone resources.</li>
</ul>
</li>
</ul>
<p><span class="vividgreen">DNS &amp; Name Resolution</span></p>
<p><strong>Host Name Resolution</strong></p>
<p>Let’s Encrypt certificates are for hostname exclusively, IP addresses are not included (which would technically be possible). It is, therefore, not possible to access the services via HTTPS by IP address, e.g. <code>https://192.168.0.4</code>. Instead, to access the services by fully-qualified domain name (FQDN) and need a way to resolve those names into IP addresses. On this example, we need to add one A record for the whoami service that testing with the following:</p>
<div class="language-bash highlight"><span class="filename">💁‍♂️    DNS Resolve</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">#Replace with the IP Address of the host that Docker running</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>subdomain.domain.com<span class="w">     </span>IP<span class="w"> </span>Address
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>e.g.
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>whoami.abc.com<span class="w">    </span><span class="m">192</span>.168.0.4
</span></code></pre></div>
<h3 id="caddy-container-on-proxmos-ve"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#caddy-container-on-proxmos-ve">Caddy Container on Proxmos VE</a></h3>
<p>Run through the preparatory steps to set up <ins><a href="2023/12/23/installing-docker/">Docker on the Proxmox host</a></ins></p>
<p><span class="vividgreen">Preparation: Increase UDP Buffer Sizes for QUIC</span></p>
<p>The QUIC protocol (implemented by Caddy) requires larger buffers than normally available in Linux (source). Add the following to <span class="cyangray">/etc/sysctl.conf</span>:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="l l-Scalar l-Scalar-Plain">net.core.rmem_max=2500000</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="l l-Scalar l-Scalar-Plain">net.core.wmem_max=2500000</span>
</span></code></pre></div></p>
<p>Reboot and check the values with the following commands:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="l l-Scalar l-Scalar-Plain">sysctl net.core.rmem_max</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="l l-Scalar l-Scalar-Plain">sysctl net.core.wmem_max</span>
</span></code></pre></div></p>
<p><span class="vividgreen">Dockerized Caddy Directory Structure</span></p>
<p>This is what the directory structure will look like when it's done:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>/rpool/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w"> </span>└──<span class="w"> </span>data/
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">     </span>└──<span class="w"> </span>docker/
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">         </span>└──<span class="w"> </span>caddy/
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">             </span>├──<span class="w"> </span>config/
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">             </span>├──<span class="w"> </span>data/
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">             </span>├──<span class="w"> </span>dockerfile-dns/
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">                 </span>└──<span class="w"> </span>Dockerfile
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">             </span>├──<span class="w"> </span>container-vars.env
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">             </span>├──<span class="w"> </span>Caddyfile
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">             </span>└──<span class="w"> </span>docker-compose.yml
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Docker convention</p>
<p>Create the <code>caddy</code> directory. The subdirectories <code>config</code> and <code>data</code> are created by docker compose on the first run.</p>
</div>
<p><span class="vividgreen">Customized Caddy Docker Image</span></p>
<p>We need a custom Caddy Docker image that includes the Cloudflare DNS plugin, which is required for the Let’s Encrypt DNS challenge.
Create the file <span class="cyangray">dockerfile-dns/Dockerfile</span> with the following content:
<div class="language-docker highlight"><span class="filename">💁‍♂️ Dockfile</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">VERSION</span><span class="o">=</span><span class="m">2</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">FROM</span><span class="w"> </span><span class="s">caddy:${VERSION}-builder</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">RUN</span><span class="w"> </span>xcaddy<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span>--with<span class="w"> </span>github.com/caddy-dns/cloudflare
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="hll"><span class="k">FROM</span><span class="w"> </span><span class="s">caddy:${VERSION}</span>
</span></span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/usr/bin/caddy<span class="w"> </span>/usr/bin/caddy
</span></code></pre></div></p>
<div class="admonition abstract">
<p class="admonition-title">Comments</p>
<p>The second <span class="vividskype"><strong>FROM</strong></span> instruction – means produce a much smaller image by simply overlaying the newly-built binary on top of the <a href="https://hub.docker.com/_/caddy">regular caddy image</a></p>
</div>
<p><span class="vividgreen">Caddy container-vars.env File</span></p>
<p>Everything that is specific to the deployment goes into the <span class="cyangray">container-vars.env</span> file. This includes domain names, IP addresses, API keys, email addresses, and so on.</p>
<p>Create with the following content:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="l l-Scalar l-Scalar-Plain">MY_DOMAIN=home.yourdomain.com</span><span class="w">               </span><span class="c1"># replace with your domain</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="l l-Scalar l-Scalar-Plain">MY_HOST_IP=192.168.0.4</span><span class="w">                      </span><span class="c1"># replace with your Docker host&#39;s IP address</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="l l-Scalar l-Scalar-Plain">CLOUDFLARE_API_TOKEN=&lt;YOUR_TOKEN&gt;</span><span class="w">           </span><span class="c1"># add your token</span>
</span></code></pre></div></p>
<p><span class="vividgreen">Caddy Docker Compose File</span></p>
<p>Create <span class="cyangray">docker-compose.yml</span> with the following content:
<sup id="fnref:Changelog01"><a class="footnote-ref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fn:Changelog01">1</a></sup>
<sup id="fnref:Changelog02"><a class="footnote-ref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fn:Changelog02">2</a></sup>
<sup id="fnref:Changelog03"><a class="footnote-ref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fn:Changelog03">3</a></sup>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">caddy</span><span class="p">:</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dockerfile-dns</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443/udp&quot;</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddynet</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="nt">env_file</span><span class="p">:</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container-vars.env</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./Caddyfile:/etc/caddy/Caddyfile:ro</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data:/data</span>
</span></span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/config</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">  </span><span class="nt">whoami</span><span class="p">:</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;containous/whoami&quot;</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="hll"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;whoami&quot;</span>
</span></span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;whoami&quot;</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddynet</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">  </span><span class="nt">caddynet</span><span class="p">:</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">    </span><span class="nt">attachable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="w">    </span><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">      </span><span class="nt">com.docker.network.bridge.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker_caddy</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">      </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.19.0.0/16</span>
</span></code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code>file</code> and <code>directories</code> in the section <span class="vividskype"><strong>volumes</strong></span> are <span class="red">bind-mounted</span> from the Docker host. Their content persists when the container is destroyed. <code>Caddyfile</code> is mounted read-only (<code>:ro</code>).</p>
<p>The <span class="vividskype"><strong>whoami</strong></span> service is created strictly for testing purposes. You can remove it once all are working as expected.</p>
</div>
<p><span class="vividgreen">Caddyfile for the whoami Container</span></p>
<p>Create Caddy’s configuration file <span class="cyangray">Caddyfile</span> in the same directory as the <span class="cyangray">docker-compose.yml</span> file and paste the following content:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="l l-Scalar l-Scalar-Plain">whoami.{$MY_DOMAIN} {</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">reverse_proxy whoami:80</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">tls {</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">dns cloudflare {env.CLOUDFLARE_API_TOKEN}</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">}</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="l l-Scalar l-Scalar-Plain">}</span>
</span></code></pre></div></p>
<p><span class="vividgreen">Start the Containers</span></p>
<p>Navigate into the directory with the <span class="cyangray">docker-compose.yml</span> file and run:
<div class="language-docker highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div></p>
<div class="admonition abstract">
<p class="admonition-title">Docker logs</p>
<p>Inspect the container <span class="vividskype"><strong>logs</strong></span> for errors with the command.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">30</span><span class="w"> </span>--timestamps
</span></code></pre></div></p>
</div>
<p><span class="vividgreen">Test</span></p>
<p>Open <code>https://whoami.abc.com</code> in your browser. It should display without certificate warnings or errors.</p>
<h3 id="proxmox-lets-encrypt-certificate"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#proxmox-lets-encrypt-certificate">Proxmox Let’s Encrypt Certificate</a></h3>
<p>Proxmox is accessible via HTTPS exclusively but comes, understandably, only with a self-signed certificate. Proxmox’s built-in support for Let’s Encrypt does not include the DNS challenge, but now have everything in place to use Caddy container to proxy access to the host’s web interface, too.</p>
<p><span class="vividgreen">Proxmox Caddyfile</span></p>
<p>Add the following to <code>Caddyfile</code>:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="l l-Scalar l-Scalar-Plain">proxmox.{$MY_DOMAIN} {</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">reverse_proxy {$MY_HOST_IP}:8006 {</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">transport http {</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">tls_insecure_skip_verify</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">}</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">}</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">tls {</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">dns cloudflare {env.CLOUDFLARE_API_TOKEN}</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">}</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="l l-Scalar l-Scalar-Plain">}</span>
</span></code></pre></div>
<span class="vividgreen">DNS A Record</span></p>
<p>Add the following A record to DNS domain provider:
<div class="language-bash highlight"><span class="filename">💁‍♀️ DNS Resolve</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">#Replace with the IP address of the host that Docker runnning</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>e.g
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>proxmox.abc.com<span class="w"> </span><span class="m">192</span>.168.0.4
</span></code></pre></div></p>
<p><span class="vividgreen">Reload Caddy’s Configuration</span></p>
<p>Instruct Caddy to reload its configuration by running:
<div class="language-docker highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-w<span class="w"> </span>/etc/caddy<span class="w"> </span>caddy<span class="w"> </span>caddy<span class="w"> </span>reload
</span></code></pre></div></p>
<p>Now be able to access the Proxmox web interface at <code>https://proxmox.abc.com</code> without getting a certificate warning from your browser.</p>
<h3 id="adjust-proxmox-proxy-settings"><a class="toclink" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#adjust-proxmox-proxy-settings">Adjust Proxmox Proxy Settings</a></h3>
<p>Right now, it should actually be possible to reach the Proxmox web interface with HTTPS with valid SSL keys via port 443. Unfortunately the original Port 8006 is also still open. So let's going to fix that now.</p>
<p>Edit the <span class="cyangray">/etc/default/pveproxy</span> configuration file with the following contents:
<div class="language-yaml highlight"><span class="filename">💁‍♂️ Pveproxy Config</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="hll"><span class="l l-Scalar l-Scalar-Plain">ALLOW_FROM=&quot;172.19.0.0/16&quot;</span>
</span></span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="l l-Scalar l-Scalar-Plain">DENY_FROM=&quot;all&quot;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="l l-Scalar l-Scalar-Plain">POLICY=&quot;allow&quot;</span>
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This configuration file tells the native Proxmox webserver to only accept requests from inside the same machine <span class="vividskype"><strong>(172.19.0.0/16 -&gt; localhost</strong></span>), so only requests coming from Caddy, running as a neighbor so to speak, are actually processed.</p>
</div>
<p>Finally make sure to restart pveproxy service:
<div class="language-bash highlight"><span class="filename">💁‍♀️ Pveproxy service</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>service<span class="w"> </span>pveproxy<span class="w"> </span>restart
</span></code></pre></div>
Congratulations! Now the Proxmox web interface should run on HTTPS Port 443 exclusively.</p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v1h-1v6h-1v1H9v1H8v1H7v1H5v-1H4v-1H3V9H2v6h1v1h1v1h1v1h1v4h2v-1H7v-1h1v-1h1v-1h1v1h1v3h2v-1h-1v-4h1v-1h1v-1h1v-3h1v1h1v-2h-2V9h5V8h-3V7h5V3h-1V2m-7 1h1v1h-1Z"/></svg></span> <a href="https://helgeklein.com/blog/automatic-https-certificates-for-services-on-internal-home-network-without-opening-firewall-port/#caddy-container-on-proxmox-ve">Helge Klein --- Caddy Container on Proxmox</a></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:Changelog01">
<p>Added the option <span class="carrot">com.docker.network.bridge.name</span> in <code>docker-compose.yml</code> to set the name of the network interface Docker creates for Caddy.<p style="text-align:right;">[2024-06-30]</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="nt">caddynet</span><span class="p">:</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">      </span><span class="nt">com.docker.network.bridge.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker_caddy</span>
</span></code></pre></div>&#160;<a class="footnote-backref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fnref:Changelog01" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:Changelog02">
<p>Configured a static <span class="carrot">IPv4 subnet</span> to be used in firewall rules.<p style="text-align:right;">[2024-06-30]</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">  </span><span class="nt">caddynet</span><span class="p">:</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">      </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.19.0.0/16</span>
</span></code></pre></div>&#160;<a class="footnote-backref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fnref:Changelog02" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:Changelog03">
<p>Removed the <span class="carrot">version</span> from <code>docker-compose.yml</code>; a warning mentions that it’s obsolete.<p style="text-align:right;">[2024-06-20]</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>
</span></code></pre></div>&#160;<a class="footnote-backref" href="2023/12/22/autommatic-https-certifications-for-services-on-internal-home-network/#fnref:Changelog03" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-12-18 00:00:00">December 18, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/proxmox/" class="md-meta__link">Proxmox</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="the-issue-on-proxmox-8"><a class="toclink" href="2023/12/18/the-issue-on-proxmox-8/">The issue on Proxmox 8:</a></h2>
<p>MDS CPU bug present and SMT on, data leak possible. <a href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/mds.html">More Detials</a> refer on Kernel.org</p>
<h3 id="reproduced-condistion"><a class="toclink" href="2023/12/18/the-issue-on-proxmox-8/#reproduced-condistion">Reproduced Condistion:</a></h3>
<ul>
<li>Proxmox platform always reboot automatically espcially when trigger the vm no matter the CPUs or Memory in which assign on the configuration.</li>
<li>Startup and work on for multiple VMs.</li>
<li>Login to proxmox recovery mode.</li>
<li>Keep VM running over night on UTF-8 time zone.</li>
<li>Host hardware power on to grub mode for system preparation.</li>
</ul>
<h3 id="work-around"><a class="toclink" href="2023/12/18/the-issue-on-proxmox-8/#work-around">Work around:</a></h3>
<ul>
<li>Disable the option on BIOS for intel hyper-threading if it has.</li>
<li>Add "mitigations=off" feature to grub for ext file system.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span><span class="c1">#/etc/default/grub</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>$<span class="w"> </span><span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&quot;quiet mitigations=off&quot;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>$<span class="w"> </span>update-grub
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>$<span class="w"> </span>reboot
</span></code></pre></div></li>
<li>Modify for zfs file system.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span><span class="c1">#/etc/kernel/cmdfile</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>$<span class="w"> </span><span class="nv">root</span><span class="o">=</span><span class="nv">ZFS</span><span class="o">=</span>rpool/ROOT/pve-1<span class="w"> </span><span class="nv">boot</span><span class="o">=</span>zfs<span class="w"> </span><span class="nv">mitigations</span><span class="o">=</span>off
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>$<span class="w"> </span>proxmox-boot-tool<span class="w"> </span>refresh
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="m">4</span><span class="w"> </span>reboot
</span></code></pre></div></li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-06-05 00:00:00">June 5, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/security/" class="md-meta__link">Security</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="secure-store"><a class="toclink" href="2023/06/05/secure-store/">Secure-store</a></h2>
<h3 id="gpg"><a class="toclink" href="2023/06/05/secure-store/#gpg"><a href="https://gnupg.org/">GPG</a></a></h3>
<p>GnuPG is a complete and free implementation of the OpenPGP standard as defined by <a href="https://www.ietf.org/rfc/rfc4880.txt">RFC4880</a> (also known as PGP). GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>gpg<span class="w"> </span>--gen-key
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># edit expire if needed</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>gpg<span class="w"> </span>--edit-key<span class="w"> </span>GPG_PUB_KEY
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1"># export GPG pub key</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>gpg<span class="w"> </span>--output<span class="w"> </span>GPG_PUB_KEY<span class="w"> </span>--armor<span class="w"> </span>--export<span class="w"> </span>EMAIL_ID
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># export GPG pri key</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>gpg<span class="w"> </span>--output<span class="w"> </span>GPG_PRI_KEY<span class="w"> </span>--armor<span class="w"> </span>--export-secret-key<span class="w"> </span>EMAIL_ID
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1"># import keys</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>gpg<span class="w"> </span>--import<span class="w"> </span>GPG_PRI_KEY
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>gpg<span class="w"> </span>--import<span class="w"> </span>GPG_PUB_KEY
</span></code></pre></div>
<p>The standard unix password manager</p>
<h3 id="pass"><a class="toclink" href="2023/06/05/secure-store/#pass"><a href="https://www.passwordstore.org/">pass</a></a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>pass<span class="w"> </span>init<span class="w"> </span>GPG_PUB_KEY
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># init git repo for pass secret-store</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>pass<span class="w"> </span>git<span class="w"> </span>init
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>pass<span class="w"> </span>insert<span class="w"> </span>github
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>pass<span class="w"> </span>generate<span class="w"> </span>aws
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>pass<span class="w"> </span>show
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>pass<span class="w"> </span>git<span class="w"> </span>log
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1"># set it up for sys env</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="nb">export</span><span class="w"> </span><span class="nv">key</span><span class="o">=</span><span class="k">$(</span>pass<span class="w"> </span>show<span class="w"> </span>KEY_PATH/KEY_ID<span class="k">)</span>
</span></code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-05-25 00:00:00">May 25, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/openwrt/" class="md-meta__link">OpenWRT</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="openwrt"><a class="toclink" href="2023/05/25/openwrt/">OpenWRT</a></h2>
<h3 id="parition-switch"><a class="toclink" href="2023/05/25/openwrt/#parition-switch">Parition switch</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>root@lede:~#<span class="w"> </span>fw_printenv<span class="w"> </span>boot_part
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nv">boot_part</span><span class="o">=</span><span class="m">1</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>fw_setenv<span class="w"> </span>boot_part<span class="w"> </span><span class="m">2</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>reboot
</span></code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2022-12-28 00:00:00">December 28, 2022</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/proxmox/" class="md-meta__link">Proxmox</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="proxmox-disk-cleanup"><a class="toclink" href="2022/12/28/proxmox-disk-cleanup/">Proxmox disk cleanup</a></h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># use ncdu command to check the directory usage under root</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>nudc<span class="w"> </span>/
</span></code></pre></div>
<h2 id="linux-old-kernel-cleanup"><a class="toclink" href="2022/12/28/proxmox-disk-cleanup/#linux-old-kernel-cleanup">Linux old kernel cleanup</a></h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">OLD_KERNEL</span><span class="o">=</span><span class="w"> </span>dpkg<span class="w"> </span>-l<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-e<span class="w"> </span>^pve-.*<span class="nv">$c</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>apt-get<span class="w"> </span>remove<span class="w"> </span>--purge<span class="w"> </span><span class="nv">$OLD_KERNEL</span>
</span></code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/94155500" alt="Darmarj M">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2022-12-13 00:00:00">December 13, 2022</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/proxy/" class="md-meta__link">Proxy</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="what-is-caddy"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.094.47c-.842 0-1.696.092-2.552.288a11.4 11.4 0 0 0-4.87 2.423 10.6 10.6 0 0 0-2.36 2.826A10.1 10.1 0 0 0 .305 8.582c-.398 1.62-.4 3.336-.043 5.048.085.405.183.809.31 1.212a11.9 11.9 0 0 0 1.662 3.729 3 3 0 0 0-.086.427 3.323 3.323 0 0 0 2.848 3.71 3.28 3.28 0 0 0 1.947-.346c1.045.51 2.17.864 3.339 1.04a11.7 11.7 0 0 0 4.285-.155 11.57 11.57 0 0 0 4.936-2.485 10.6 10.6 0 0 0 2.352-2.894 11.2 11.2 0 0 0 1.356-4.424 11.2 11.2 0 0 0-.498-4.335q.263-.116.486-.293h.001c.402-.322.693-.794.777-1.342a2.146 2.146 0 0 0-1.79-2.434 2.1 2.1 0 0 0-1.205.171q-.059-.064-.113-.13a11.7 11.7 0 0 0-3.476-2.93 13 13 0 0 0-1.76-.81 13.6 13.6 0 0 0-2.06-.613 12 12 0 0 0-2.48-.258Zm.714.328a10 10 0 0 1 1.028.042 9.9 9.9 0 0 1 2.743.639c.984.39 1.89.958 2.707 1.632a10.8 10.8 0 0 1 2.091 2.328q.038.06.07.12a2.12 2.12 0 0 0-.435 2.646c-.158.114-.97.692-1.634 1.183-.414.308-.733.557-.733.557l.581.68s.296-.276.665-.638c.572-.562 1.229-1.233 1.395-1.403a2.12 2.12 0 0 0 1.907.677 11.2 11.2 0 0 1-.013 4.046 11.4 11.4 0 0 1-1.475 3.897 12.3 12.3 0 0 1-2.079 2.587c-1.19 1.125-2.633 2.022-4.306 2.531a10.8 10.8 0 0 1-3.973.484 11 11 0 0 1-3.057-.652 3.3 3.3 0 0 0 1.417-2.294 3.28 3.28 0 0 0-.294-1.842c.18-.162.403-.363.656-.6 1.015-.955 2.353-2.303 2.353-2.303l-.47-.599s-1.63.972-2.801 1.728c-.307.198-.573.378-.777.517a3.3 3.3 0 0 0-1.516-.611 3.33 3.33 0 0 0-3.487 2.017 10 10 0 0 1-.695-1.078A11 11 0 0 1 .728 14.8a10 10 0 0 1-.2-1.212c-.164-1.653.103-3.258.629-4.754a13 13 0 0 1 1.087-2.288c.57-.968 1.248-1.872 2.069-2.656A11 11 0 0 1 11.808.797Zm-.147 3.257a3.84 3.84 0 0 0-3.82 3.82v2.36h-.94c-.751 0-1.377.625-1.377 1.377v3.8h1.46v-3.718h9.354v6.264H10.02v1.46h6.4c.751 0 1.377-.625 1.377-1.377v-6.43a1.39 1.39 0 0 0-1.377-1.377h-.94v-2.36a3.84 3.84 0 0 0-3.82-3.819zm0 1.46a2.37 2.37 0 0 1 2.36 2.36v2.36H9.3v-2.36a2.37 2.37 0 0 1 2.36-2.36zm10.141.392a1.253 1.253 0 0 1 1.296 1.434 1.24 1.24 0 0 1-.453.78c-.266.213-.61.318-.968.264a1.253 1.253 0 0 1-1.045-1.42 1.255 1.255 0 0 1 1.17-1.058M5.384 17.425a2.02 2.02 0 0 1 1.917 1.298c.116.3.159.628.114.967a2.015 2.015 0 0 1-2.249 1.728 2.016 2.016 0 0 1-1.727-2.25 2.02 2.02 0 0 1 1.945-1.743"/></svg></span> What is Caddy?</a></h2>
<p>At the most basic level, a web server like nginx or httpd. Like other web servers, caddy can serve content, or it can intercept web traffic to serve other sites (this is the core feature of a reverse proxy).at the most basic level, a web server like nginx or httpd. Like other web servers, caddy can serve content, or it can intercept web traffic to serve other sites (this is the core feature of a reverse proxy).</p>
<p>Unlike other web servers, caddy has some nice features that make it more palatable as a host:</p>
<ul>
<li>Automatic SSL, whether you want to generate your own certs or use ACME servers</li>
<li>Very simple syntax for writing our configs. Most sites require a single directive.</li>
<li>Based on go, a modern language with memory safety controls</li>
<li>Sane defaults. By default caddy sets up sites securely and (usually) without any additional configuration</li>
<li>A single, static binary. While our implementation will be docker focused, nothing is stopping you from installing caddy as a normal package or even as an executable on Windows.</li>
</ul>
<h3 id="caddy-config-file"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/#caddy-config-file">Caddy config file</a></h3>
<p>"Caddyfile" on which caddy calls the config for use. The <a href="https://caddyserver.com/docs/caddyfile">syntac</a> for more details for read up.</p>
<div class="admonition note">
<p>For inside, you can refer as <a href="https://caddyserver.com/docs/">offocial documentation</a></p>
</div>
<h4 id="example"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/#example">Example</a></h4>
<div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="err">&lt;subdomai</span><span class="kc">n</span><span class="err">&gt;.&lt;domai</span><span class="kc">n</span><span class="err">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="err">reverse_proxy</span><span class="w"> </span><span class="err">&lt;IP&gt;</span><span class="p">:</span><span class="err">&lt;Por</span><span class="kc">t</span><span class="err">&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="acme-portocol"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/#acme-portocol">ACME Portocol</a></h3>
<p>How can we get a valid HTTPS certificate, signed by a certificate authority, so our site looks valid? Well we can do it the boring manual way, generating a Certificate Signing Request (CSR), having an authority sign that request, and returning a signed certificate. No thanks.</p>
<p>Instead, the good people at let’s encrypt developed the ACME protocol: a completely automated way to generate and provide signed certificates to sites like yours or mine. Let’s encrypt (and other services like zeroSSL) even provide a completely free service to do this for us!</p>
<p>The two most widely used options are the DNS and HTTP challenge methods.</p>
<h3 id="dns-acme-challenges"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/#dns-acme-challenges">DNS ACME Challenges</a></h3>
<p><img alt="Typonology" src="assets/Caddy-Let%27sEncrypt-ACME.png" title="Typonology" /></p>
<p>Pre-requisites:</p>
<ul>
<li>A Public DNS Domain, registered with a Domain Register. <a href="https://www.cloudflare.com/">cloudflare</a> is the recommendation.</li>
<li><a href="https://github.com/caddy-dns/cloudflare">DNS provider</a> to be available from the list of providers found in the <a href="https://github.com/caddy-dns/cloudflare">dns.providers modules</a>.</li>
</ul>
<h3 id="setup-with-docker-service"><a class="toclink" href="2022/12/13/simple-caddy-what-is-caddy/#setup-with-docker-service">Setup with Docker service</a></h3>
<ul>
<li>Create the <span class="jade">docker-compose.yml</span> in the folder named as <span class="rouge">caddy</space>.</li>
</ul>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nt">caddy</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy:latest</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">caddy</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">security_opt</span><span class="p">:</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">label:disable</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443/udp&quot;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./container-config:/etc/caddy</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/localtime:/etc/localtime:ro</span>
</span></code></pre></div>
<ul>
<li>Bring it up with following way:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div></li>
</ul>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Linux/Gentoo/Bootloader/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Configuring the bootloader">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Configuring the bootloader
              </div>
            </div>
          </a>
        
        
          
          <a href="category/container/" class="md-footer__link md-footer__link--next" aria-label="Next: Container">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Container
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; .2020 ~ 2024. Darmarj.M
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
    
    
    
      
      
    
    <a href="https://mas.to/@hydenzw" target="_blank" rel="noopener me" title="mas.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/darmarj" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/kenzzw" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
  
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  <script src="../assets/javascripts/custom.fe17d8dd.min.js"></script>

  </body>
</html>